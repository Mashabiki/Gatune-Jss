
function saveMarks() {
    showLoadingSpinner(); // Show spinner

    setTimeout(() => {
        let archivedMarks = JSON.parse(localStorage.getItem("archivedMarks")) || [];

        if (!Array.isArray(marks) || marks.length === 0) {
            console.error("No marks available to save.");
            hideLoadingSpinner();
            return;
        }

        console.log(`Saving ${marks.length} marks...`);

        // Ensure no duplicate records
        const uniqueMarks = marks.filter(newMark => 
            !archivedMarks.some(existing => existing.admissionNumber === newMark.admissionNumber)
        );

        archivedMarks.push(...uniqueMarks); // Add new unique marks
        localStorage.setItem("archivedMarks", JSON.stringify(archivedMarks));

        console.log(`Total marks saved: ${archivedMarks.length}`);

        // Show success message
        const successMessage = document.getElementById("saveSuccessMessage");
        successMessage.style.display = "block";

        setTimeout(() => {
            successMessage.style.display = "none";
            hideLoadingSpinner();
        }, 3000);

        updateMarksTable(); // Update table after saving
    }, 2000); // Simulated delay for saving process
}
